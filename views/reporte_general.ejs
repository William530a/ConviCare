<%- include('partials/header') %>

<link rel="stylesheet" href="/styles.css">


<div style="background-color: #1E90FF; color: white; padding: 40px; text-align: center; font-size: 24px; font-weight: bold;">
    ConviCare - Reporte General
</div>

<div class="container mt-5">
    <h2 class="text-center mb-4">Reporte General de Pacientes</h2>
    <p class="text-center fs-5">Total de pacientes por atender: <strong><%= totalPacientes %></strong></p>

    <% if (pacientes.length > 0) { %>
        <div class="table-responsive">
            <table class="table table-striped table-hover shadow-sm">
                <thead class="table-dark">
                    <tr>
                        <th>ID</th>
                        <th>Nombre</th>
                        <th>Identificación</th>
                        <th>Fecha</th>
                        <th>Servicios Recibidos</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <% pacientes.forEach((paciente) => { %>
                        <tr>
                            <td><%= paciente.id %></td>
                            <td><%= paciente.nombre %></td>
                            <td><%= paciente.identificacion %></td>
                            <td><%= paciente.fecha.toISOString().split('T')[0] %></td>
                            <td><%= paciente.servicios %></td>
                            <td>
                                <div class="d-inline-block card shadow p-0 mx-1" style="background: none; border: none;">
                                    <a href="/historias_clinicas_atendidas/ver/<%= paciente.id %>" class="btn btn-primary">Ver</a>
                                </div>
                            </td>
                        </tr>
                    <% }) %>                    
                </tbody>
            </table>
        </div>
    <% } else { %>
        <div class="alert alert-info text-center">
            <i class="bi bi-info-circle"></i> No hay pacientes registrados con servicios asignados.
        </div>
    <% } %>    
</div>


<div class="container mt-5">
    <h2 class="text-center mb-4">Reporte General de Pacientes Atendidos</h2>
    <p class="text-center fs-5">Total de pacientes atendidos: <strong><%= totalAtendidos %></strong></p>

    <% if (atendidos.length > 0) { %>
        <div class="table-responsive">
            <table class="table table-striped table-hover shadow-sm">
                <thead class="table-dark">
                    <tr>
                        <th>ID</th>
                        <th>Nombre</th>
                        <th>Identificación</th>
                        <th>Fecha</th>
                        <th>Servicios Recibidos</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <% atendidos.forEach((atendido) => { %>
                        <tr>
                            <td><%= atendido.id %></td>
                            <td><%= atendido.nombre %></td>
                            <td><%= atendido.identificacion %></td>
                            <td><%= atendido.fecha.toISOString().split('T')[0] %></td>
                            <td><%= atendido.servicios %></td>
                            <td>
                                <div class="d-inline-block card shadow p-0 mx-1" style="background: none; border: none;">
                                    <a href="/historias_clinicas_atendidas/ver/<%= atendido.id %>" class="btn btn-primary">Ver</a>
                                </div>
                            </td>
                        </tr>
                    <% }) %>                    
                </tbody>
            </table>
        </div>
    <% } else { %>
        <div class="alert alert-info text-center">
            <i class="bi bi-info-circle"></i> No hay pacientes registrados con servicios asignados.
        </div>
    <% } %>    
</div>

<div class="text-center mt-4">
    <a href="/resumen_reportes" class="btn btn-dark btn-lg">
        <i class="bi bi-arrow-left"></i> Volver a Reportes
    </a>
</div>

<%- include('partials/footer') %>
